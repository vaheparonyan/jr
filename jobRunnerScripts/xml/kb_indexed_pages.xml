<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<Knowledge_base>

    <job name="prepare_kb_indexed_pages" type="executeBash"
         command="./shell/prepare_kb_indexed_pages.sh @parameter_host"
         region="na">
        <parameters>
            <keyvalue key="host" value="seo-content-optimizer.snc1"/>
        </parameters>
    </job>

    <job name="load_indexed_pages" type="executeHiveQuery"
         command="hql/get_indexed_pages.hql"
            query_type="file"
            region="na">
        <parameters>
            <keyvalue key="date" value="${date}"/>
        </parameters>
        <variables>
            <hivevar key="date_value" value="@parameter_date"/>
            <hivevar key="db_name" value="seo_kbase"/>
        </variables>
        <dependencies>
            <dependent name='prepare_kb_indexed_pages'/>
        </dependencies>
    </job>

    <job name="load_daily_churn" type="executeHiveQuery"
         command="hql/get_daily_churn.hql"
            query_type="file"
            region="na">
        <parameters>
            <keyvalue key="date" value="${date}"/>
            <keyvalue key="dtkey" value="${datekey}"/>
        </parameters>
        <variables>
            <hivevar key="date_value" value="@parameter_date"/>
            <hivevar key="date_key" value="@parameter_dtkey"/>
            <hivevar key="db_name" value="seo_kbase"/>
        </variables>
        <dependencies>
            <dependent name='load_indexed_pages'/>
        </dependencies>
    </job>

</Knowledge_base>

